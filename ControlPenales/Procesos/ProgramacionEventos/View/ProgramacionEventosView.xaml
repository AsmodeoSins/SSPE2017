<UserControl x:Class="ControlPenales.ProgramacionEventosView"
             xmlns:Name="ProgramacionEventosWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             xmlns:Views="clr-namespace:ControlPenales"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:cmd="http://www.galasoft.ch/mvvmlight"
             Height="auto" Width="auto">

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding OnLoaded}" CommandParameter="{Binding ElementName=ProgramacionEventosWindow}"  />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <UserControl.Resources>
        <Views:NombreConverter x:Key="CoverterNombre" />
        <Views:TrimStringConverter x:Key="Trimming" />
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="auto"></RowDefinition>
        </Grid.RowDefinitions>

        <!--MENU-->
        <Views:MenuIconosView Grid.Column="0" Grid.Row="0" />
        <!--TITULO-->
        <Label Grid.Column="0" Grid.Row="1"  Content="Programación de Eventos" Style="{DynamicResource DescriptionHeaderStyle}" />

        <Expander IsExpanded="True" Grid.Column="0" Grid.Row="2" Header="Programacion de Eventos" HorizontalAlignment="Stretch" Height="auto" Name="eventos" Margin="0 0 0 10">
            <!--<GroupBox Grid.Column="0" Grid.Row="2" Header="Informacion del Evento">-->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition Height="auto"></RowDefinition>
                </Grid.RowDefinitions>

                <Label Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2">Nombre</Label>
                <Label Grid.Column="2" Grid.Row="0">Tipo</Label>

                <TextBox Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" CharacterCasing="Upper" Text="{Binding ENombre,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}" MaxLength="200"></TextBox>
                <ComboBox Grid.Column="2"
                          Grid.Row="1"
                          ItemsSource="{Binding LstEventoTipo}"
                          SelectedValuePath="ID_TIPO"
                          DisplayMemberPath="DESCR"
                          SelectedValue="{Binding EEventoTipo,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></ComboBox>

                <Label Grid.Column="0" Grid.Row="2">Lugar</Label>
                <Label Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="2">Lugar Externo</Label>
                <ComboBox Grid.Column="0"
                          Grid.Row="3"
                          ItemsSource="{Binding LstCentros}"
                          SelectedValuePath="ID_CENTRO"
                          DisplayMemberPath="DESCR"
                          SelectedItem="{Binding SelectedCentro}"
                          SelectedValue="{Binding ECentro,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></ComboBox>
                <TextBox Grid.Column="1" Grid.Row="3" Grid.ColumnSpan="2" MaxLength="200" CharacterCasing="Upper" Text="{Binding ELugar,ValidatesOnDataErrors=True}" IsEnabled="{Binding ELugarEnabled}"></TextBox>

                <Label Grid.Column="0" Grid.Row="4">Dirección</Label>
                <Label Grid.Column="1" Grid.Row="4">Estado</Label>
                <Label Grid.Column="2" Grid.Row="4">Ciudad</Label>
                <TextBox Grid.Column="0"
                         Grid.Row="5"
                         MaxLength="400"
                         CharacterCasing="Upper"
                         Text="{Binding EDireccion,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                         IsEnabled="{Binding ELugarEnabled}"></TextBox>
                <ComboBox Grid.Column="1"
                          Grid.Row="5"
                          ItemsSource="{Binding LstEntidades}"
                          SelectedValuePath="ID_ENTIDAD"
                          DisplayMemberPath="DESCR"
                          SelectedItem="{Binding SelectedEntidad}"
                          SelectedValue="{Binding EEstado,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                          IsEnabled="{Binding ELugarEnabled}"></ComboBox>
                <ComboBox Grid.Column="2"
                          Grid.Row="5"
                          ItemsSource="{Binding LstMunicipios}"
                          SelectedValuePath="ID_MUNICIPIO"
                          DisplayMemberPath="MUNICIPIO1"
                          SelectedValue="{Binding EMunicipio,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                          IsEnabled="{Binding ELugarEnabled}"></ComboBox>

                <Label Grid.Column="0" Grid.Row="6">Duración Estimada</Label>
                <Label Grid.Column="1" Grid.Row="6">Fecha</Label>

                <!--<TextBox Grid.Column="0" Grid.Row="7" MaxLength="2" CharacterCasing="Upper" Text="{Binding EDuracion,ValidatesOnDataErrors=True}" Margin="0,1,0,25" Grid.RowSpan="2"></TextBox>-->
                <Grid Grid.Column="0" Grid.Row="7">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition Width="60"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Horas:"></Label>
                    <TextBox Grid.Column="1"
                             MaxLength="2"
                             CharacterCasing="Upper"
                             Text="{Binding EDuracionHrs,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></TextBox>
                    <Label Grid.Column="2" Content="Minutos:"></Label>
                    <TextBox Grid.Column="3"
                             MaxLength="2"
                             CharacterCasing="Upper"
                             Text="{Binding EDuracionMin,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></TextBox>
                </Grid>

                <!--<DatePicker Grid.Column="1" Grid.Row="7" Controls:TextBoxHelper.Watermark="Selecciona una fecha" SelectedDate="{Binding EFecha,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"  />-->
                <Border Grid.Column="1" Grid.Row="7"  BorderBrush="Red" ToolTipService.IsEnabled="{Binding EFechaAux, Converter={Views:BoolToOppositeBoolConverter}}">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="ToolTipService.Placement" Value="Right"></Setter>
                            <Setter Property="ToolTipService.HorizontalOffset" Value="5"></Setter>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding EFechaAux,ValidatesOnDataErrors=True}" Value="False">
                                    <Setter Property="BorderThickness" Value="1"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <ToolTipService.ToolTip>
                        <ToolTip Template="{StaticResource ToolTipTemplate}">
                            <ToolTip.Content>
                                <TextBlock Text="{Binding EMensajeErrorFecha}" Style="{StaticResource errorLabel}"/>
                            </ToolTip.Content>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <!--Cuidado:El datepicker no puede ser validado directamente bajo las reglas del viewmodel -->
                    <DatePicker Controls:TextBoxHelper.Watermark="Selecciona una fecha" SelectedDate="{Binding EFecha,UpdateSourceTrigger=PropertyChanged}"></DatePicker>
                </Border>

                <Label Grid.Column="2" Grid.Row="6">Responsable</Label>
                <ComboBox Grid.Column="3" Grid.Row="7" ItemsSource="{Binding ListResponsables}" SelectedValuePath="ID_EMPLEADO"
                        SelectedValue="{Binding SelectResponsable,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}">
                    <ComboBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel />
                        </ItemsPanelTemplate>
                    </ComboBox.ItemsPanel>
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="{}{0} {1} {2}">
                                        <Binding Path="PERSONA.PATERNO" Converter="{StaticResource Trimming}" />
                                        <Binding Path="PERSONA.MATERNO" Converter="{StaticResource Trimming}" />
                                        <Binding Path="PERSONA.NOMBRE" Converter="{StaticResource Trimming}" />
                                    </MultiBinding>
                                </TextBlock.Text></TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Label Grid.Column="0" Grid.Row="8">Hora de Invitación de Asistentes</Label>
                <Label Grid.Column="1" Grid.Row="8">Hora de Arribo de Presidium</Label>
                <Label Grid.Column="2" Grid.Row="8">Teléfono</Label>

                <!--<DatePicker Grid.Column="0" Grid.Row="9" Controls:TextBoxHelper.Watermark="Selecciona una fecha" SelectedDate="{Binding EHoraInvitados}" />
                <DatePicker Grid.Column="1" Grid.Row="9" Controls:TextBoxHelper.Watermark="Selecciona una fecha" SelectedDate="{Binding EHoraPresidium}" />-->
                <!--<xctk:DateTimeUpDown  Grid.Column="0" Grid.Row="9" ShowButtonSpinner="False" Format="Custom" FormatString="HH:mm tt" Value="{Binding EHoraInvitados,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}" />-->
                <xctk:DateTimeUpDown Grid.Column="0"
                                                     Grid.Row="9"
                                                     ShowButtonSpinner="False"
                                                     Format="Custom"
                                                     FormatString="HH:mm"
                                                     Value="{Binding EHoraInvitados,ValidatesOnDataErrors=True,UpdateSourceTrigger=LostFocus}"/>

                <!--<xctk:DateTimeUpDown  Grid.Column="1" Grid.Row="9" ShowButtonSpinner="False" Format="Custom" FormatString="HH:mm tt" Value="{Binding EHoraPresidium,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}" />-->
                <xctk:DateTimeUpDown Grid.Column="1"
                                                     Grid.Row="9"
                                                     ShowButtonSpinner="False"
                                                     Format="Custom"
                                                     FormatString="HH:mm"
                                                     Value="{Binding EHoraPresidium, ValidatesOnDataErrors=True, UpdateSourceTrigger=LostFocus}"/>
                <TextBox Grid.Column="2"
                         Grid.Row="9"
                         MaxLength="20"
                         CharacterCasing="Upper"
                         Text="{Binding ETelefono, UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                         IsEnabled="{Binding ELugarEnabled}">
                    <i:Interaction.Behaviors>
                        <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[0-9]+$" MaxLength="14" />
                    </i:Interaction.Behaviors>
                </TextBox>

                <Label Grid.Column="0" Grid.Row="10" Grid.ColumnSpan="2">Dependencia/Entidad Promovente</Label>
                <TextBox Grid.Column="0"
                         Grid.Row="11"
                         Grid.ColumnSpan="3"
                         MaxLength="200"
                         CharacterCasing="Upper"
                         Text="{Binding EDependencia,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></TextBox>

                <Label Grid.Column="0" Grid.Row="12" Grid.ColumnSpan="2">Perfil de los Invitados al Evento</Label>
                <TextBox Grid.Column="0"
                         Grid.Row="13"
                         Grid.ColumnSpan="3"
                         MaxLength="200"
                         CharacterCasing="Upper"
                         Text="{Binding EPerfilInvitados,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></TextBox>

                <Label Grid.Column="0" Grid.Row="14" Grid.ColumnSpan="2">Objetivo del Evento</Label>
                <TextBox Grid.Column="0" Grid.Row="15" Grid.ColumnSpan="3" MaxLength="1000" CharacterCasing="Upper" Text="{Binding EObjetivo,ValidatesOnDataErrors=True}"></TextBox>

                <Label Grid.Column="0" Grid.Row="16" Grid.ColumnSpan="2">Maestro de Ceremonia</Label>
                <TextBox Grid.Column="0" Grid.Row="17" Grid.ColumnSpan="3" MaxLength="200" CharacterCasing="Upper" Text="{Binding EMaestroCeremonias,ValidatesOnDataErrors=True}"></TextBox>

                <Grid Grid.Column="0" Grid.Row="18" Grid.RowSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Label Grid.Column="0" Grid.Row="0">Comite de Recepción y Despedida</Label>
                    <Label Grid.Column="1" Grid.Row="0">Convocatoria a Medios</Label>

                    <CheckBox Grid.Column="0" Grid.Row="1" HorizontalAlignment="Center" IsChecked="{Binding EComite,UpdateSourceTrigger=PropertyChanged}"></CheckBox>
                    <CheckBox Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center" IsChecked="{Binding EConvocartoriaMedios,UpdateSourceTrigger=PropertyChanged}"></CheckBox>

                </Grid>


                <Label Grid.Column="1" Grid.Row="18">Impacto del Evento</Label>
                <Label Grid.Column="2" Grid.Row="18">Vestimenta Sugerida</Label>
                <ComboBox Grid.Column="1"
                          Grid.Row="19"
                          ItemsSource="{Binding LstEventoImpacto}"
                          SelectedValuePath="ID_IMPACTO"
                          DisplayMemberPath="DESCR"
                          SelectedValue="{Binding EImpactoEvento,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></ComboBox>
                <ComboBox Grid.Column="2"
                          Grid.Row="19"
                          ItemsSource="{Binding LstEventoVestimenta}"
                          SelectedValuePath="ID_VESTIMENTA"
                          DisplayMemberPath="DESCR"
                          SelectedValue="{Binding EVestimentaSugerida,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"></ComboBox>


                <Label Grid.Column="0" Grid.Row="22">Observaciones</Label>
                <TextBox Grid.Column="0"
                         Grid.Row="23"
                         Grid.ColumnSpan="3"
                         MaxLength="4000"
                         CharacterCasing="Upper"
                         Text="{Binding EObservacion,UpdateSourceTrigger=PropertyChanged}"></TextBox>

                <Label Grid.Column="0" Grid.Row="24">Estatus</Label>
                <ComboBox Grid.Column="0"
                          Grid.Row="25"
                          ItemsSource="{Binding LstEventoEstatus}"
                          SelectedValue="{Binding EEstatus,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                          SelectedValuePath="ID_ESTATUS"
                          DisplayMemberPath="DESCR"
                          IsEnabled="{Binding EEstatusEnabled}"></ComboBox>

            </Grid>
        </Expander>

        <Controls:MetroAnimatedSingleRowTabControl TabStripPlacement="Top" Height="auto" Grid.Column="0" Grid.Row="3" Controls:TabControlHelper.IsUnderlined="True" SelectedItem="{Binding TabSelected}" >
            <TabItem Header="Programa" Style="{StaticResource HeaderTabStyle}" Selector.IsSelected="False" >
                <AdornerDecorator>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="75"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Button Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Width="50" Height="50" HorizontalAlignment="Center"  ToolTip="Buscar" 
                        Style="{DynamicResource MetroCircleButtonStyle}" CommandParameter="programa_up" Command="{Binding OnClick}">
                        <Rectangle Width="20" Height="20" Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_arrow_up}" />
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Width="50" Height="50" HorizontalAlignment="Center"  ToolTip="Buscar" Margin="0 90 0 0"
                        Style="{DynamicResource MetroCircleButtonStyle}" CommandParameter="programa_down" Command="{Binding OnClick}">
                        <Rectangle Width="20" Height="20" Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_arrow_down}" />
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <DataGrid Grid.Column="1"
                              Grid.Row="0"
                              FontSize="11.5"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              CanUserAddRows="True"
                              ItemsSource="{Binding LstEventoPrograma,ValidatesOnDataErrors=True}"
                              SelectedItem="{Binding SelectedEventoPrograma}"
                              Style="{StaticResource MetroDataGrid}"
                              Margin="0 15 0 0"
                              SelectedIndex="{Binding PIndex}"
                              SelectionMode="Single">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Descripción" Binding="{Binding DESCR}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Duración" Binding="{Binding DURACION}"></DataGridTextColumn>
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Agregar" Command="{Binding OnClick}" CommandParameter="add_programa"/>
                                <MenuItem Header="Editar" Command="{Binding OnClick}" CommandParameter="edit_programa"/>
                                <MenuItem Header="Eliminar" Command="{Binding OnClick}" CommandParameter="del_programa"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                    <Label Grid.Column="1" Grid.Row="0" Content="No hay información..." FontSize="11.5" HorizontalAlignment="Center" FontStyle="Italic" Visibility="{Binding EProgramaVisible}" Margin="0 45 0 0"></Label>

                </Grid>
                </AdornerDecorator>
            </TabItem>

            <TabItem Header="Presidium" Style="{StaticResource HeaderTabStyle}" Selector.IsSelected="False" >
                <AdornerDecorator>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="75"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Button Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Width="50" Height="50" HorizontalAlignment="Center"  ToolTip="Buscar" 
                        Style="{DynamicResource MetroCircleButtonStyle}" CommandParameter="presidium_up" Command="{Binding OnClick}">
                        <Rectangle Width="20" Height="20" Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_arrow_up}" />
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Width="50" Height="50" HorizontalAlignment="Center"  ToolTip="Buscar" Margin="0 90 0 0"
                        Style="{DynamicResource MetroCircleButtonStyle}" CommandParameter="presidium_down" Command="{Binding OnClick}">
                        <Rectangle Width="20" Height="20" Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_arrow_down}" />
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <DataGrid Grid.Column="1"
                              Grid.Row="0"
                              FontSize="11.5"
                              ItemsSource="{Binding LstEventoPresidium,ValidatesOnDataErrors=True}"
                              SelectedItem="{Binding SelectedEventoPresidium}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              IsReadOnly="True"
                              Style="{StaticResource MetroDataGrid}"
                              SelectionMode="Single"
                              Margin="0 15 0 0" SelectedIndex="{Binding PRIndex}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nombre" Binding="{Binding NOMBRE}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Puesto" Binding="{Binding PUESTO}"></DataGridTextColumn>
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Agregar" Command="{Binding OnClick}" CommandParameter="add_presidium"/>
                                <MenuItem Header="Editar" Command="{Binding OnClick}" CommandParameter="edit_presidium"/>
                                <MenuItem Header="Eliminar" Command="{Binding OnClick}" CommandParameter="del_presidium"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                    <Label Grid.Column="1" Grid.Row="0" Content="No hay información..." FontSize="11.5" HorizontalAlignment="Center" FontStyle="Italic" Visibility="{Binding EPresidiumVisible}" Margin="0 45 0 0"></Label>

                </Grid>
                </AdornerDecorator>
            </TabItem>

            <TabItem Header="Objetivo General" Style="{StaticResource HeaderTabStyle}" Selector.IsSelected="False" >
                <AdornerDecorator>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="29*"></ColumnDefinition>
                            <ColumnDefinition Width="396*"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Grid.Column="0" MinLines="5" MaxLines="10" MinHeight="150" MaxHeight="150" Margin="5 15 5 0" Text="{Binding EObjetivoGral,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}" MaxLength="1000" CharacterCasing="Upper" TextWrapping="Wrap" MaxWidth="{Binding ElementName=eventos,Path=ActualWidth}" Grid.ColumnSpan="2"></TextBox>
                    </Grid>
                </AdornerDecorator>
            </TabItem>

            <TabItem Header="Información Tecnica" Style="{StaticResource HeaderTabStyle}" Selector.IsSelected="False" >
                <AdornerDecorator>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <DataGrid Grid.Column="0"
                              Grid.Row="1"
                              FontSize="11.5"
                              ItemsSource="{Binding LstEventoInfTecnica,ValidatesOnDataErrors=True}"
                              SelectedItem="{Binding SelectedEventoInfTecnica}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              SelectionMode="Single"
                              Style="{StaticResource MetroDataGrid}"
                              IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Descripción" Binding="{Binding DESCR}"></DataGridTextColumn>
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Agregar" Command="{Binding OnClick}" CommandParameter="add_inf_tecnica"/>
                                <MenuItem Header="Editar" Command="{Binding OnClick}" CommandParameter="edit_inf_tecnica"/>
                                <MenuItem Header="Eliminar" Command="{Binding OnClick}" CommandParameter="del_inf_tecnica"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                    <Label Grid.Column="0" Grid.Row="2" Content="No hay información..." FontSize="11.5" HorizontalAlignment="Center" FontStyle="Italic" Visibility="{Binding EInfTecnicaVisible}"></Label>

                </Grid>
                </AdornerDecorator>
            </TabItem>
           
            <TabItem Header="Internos"
                     Style="{StaticResource HeaderTabStyle}"
                     Selector.IsSelected="False">
                <AdornerDecorator>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition Width="75"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <GroupBox Grid.Column="0"
                              Grid.Row="0"
                              Header="No.Expediente">
                        <Grid>
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ElementName=AnioBuscar, Path=Text.Length}"
                                                     Value="4">
                                            <Setter Property="FocusManager.FocusedElement"
                                                    Value="{Binding ElementName=FolioBuscar}" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="20"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"></RowDefinition>
                                <RowDefinition Height="auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Label Grid.Column="0" Grid.Row="0">Año</Label>
                            <Label Grid.Column="2"
                                   Grid.Row="0">Folio</Label>
                            <TextBox Grid.Column="0"
                                     Grid.Row="1"
                                     Text="{Binding IAnio,UpdateSourceTrigger=PropertyChanged}"
                                     MaxLength="4"
                                     Name="AnioBuscar">
                                <TextBox.InputBindings>
                                    <KeyBinding CommandParameter="buscar_imputado"
                                                Command="{Binding OnClick}"
                                                Key="Enter" />
                                </TextBox.InputBindings>
                                <i:Interaction.Behaviors>
                                    <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[0-9]+$" MaxLength="4" />
                                </i:Interaction.Behaviors>
                            </TextBox>
                            <Label Grid.Column="1" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Content="/"></Label>
                            <TextBox Grid.Column="2"
                                     Grid.Row="1"
                                     Text="{Binding IFolio,UpdateSourceTrigger=PropertyChanged}"
                                     MaxLength="6"
                                     Name="FolioBuscar">
                                <TextBox.InputBindings>
                                    <KeyBinding CommandParameter="buscar_imputado"
                                                Command="{Binding OnClick}"
                                                Key="Enter" />
                                </TextBox.InputBindings>
                                <i:Interaction.Behaviors>
                                    <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[0-9]+$" MaxLength="6" />
                                </i:Interaction.Behaviors>
                            </TextBox>
                        </Grid>
                    </GroupBox>
                    <GroupBox Grid.Column="1"
                              Grid.Row="0"
                              Header="Nombre">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"></RowDefinition>
                                <RowDefinition Height="auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Label Grid.Column="0"
                                   Grid.Row="0"
                                   Content="Nombre"></Label>
                            <Label Grid.Column="1"
                                   Grid.Row="0"
                                   Content="Apellido Paterno"></Label>
                            <Label Grid.Column="2"
                                   Grid.Row="0"
                                   Content="Apellido Materno"></Label>

                            <TextBox Grid.Column="0"
                                     Grid.Row="1" Text="{Binding INombre,UpdateSourceTrigger=PropertyChanged}" MaxLength="40" CharacterCasing="Upper">
                                <TextBox.InputBindings>
                                    <KeyBinding CommandParameter="buscar_imputado"
                                                Command="{Binding OnClick}"
                                                Key="Enter" />
                                </TextBox.InputBindings>
                                <i:Interaction.Behaviors>
                                    <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[a-zA-ZñÑ]*$" MaxLength="40" />
                                </i:Interaction.Behaviors>
                            </TextBox>
                            <TextBox Grid.Column="1"
                                     Grid.Row="1" Text="{Binding IPaterno,UpdateSourceTrigger=PropertyChanged}" MaxLength="30" CharacterCasing="Upper">
                                <TextBox.InputBindings>
                                    <KeyBinding CommandParameter="buscar_imputado"
                                                Command="{Binding OnClick}"
                                                Key="Enter" />
                                </TextBox.InputBindings>
                                <i:Interaction.Behaviors>
                                    <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[a-zA-ZñÑ]*$" MaxLength="30" />
                                </i:Interaction.Behaviors>
                            </TextBox>
                            <TextBox Grid.Column="2"
                                     Grid.Row="1" Text="{Binding IMaterno,UpdateSourceTrigger=PropertyChanged}" MaxLength="30" CharacterCasing="Upper">
                                <TextBox.InputBindings>
                                    <KeyBinding CommandParameter="buscar_imputado"
                                                Command="{Binding OnClick}"
                                                Key="Enter" />
                                </TextBox.InputBindings>
                                <i:Interaction.Behaviors>
                                    <Views:AllowableCharactersTextBoxBehavior RegularExpression="^[a-zA-ZñÑ]*$" MaxLength="30" />
                                </i:Interaction.Behaviors>
                            </TextBox>
                        </Grid>
                    </GroupBox>
                    <StackPanel HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Grid.Column="2">
                        <Label HorizontalAlignment="Center"
                               Content="Buscar"
                               Padding="0" />
                        <Button HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Width="50"
                                Height="50"
                                ToolTip="Buscar"
                                Name="BotonBuscar"
                                CommandParameter="buscar_imputado"
                                Command="{Binding OnClick}"
                                Style="{DynamicResource MetroCircleButtonStyle}">
                            <Rectangle Width="20"
                                       Height="20"
                                       Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                                <Rectangle.OpacityMask>
                                    <VisualBrush Stretch="Fill"
                                                 Visual="{DynamicResource appbar_magnify_browse}" />
                                </Rectangle.OpacityMask>
                            </Rectangle>
                        </Button>
                    </StackPanel>

                    <GroupBox Grid.Column="0"
                              Grid.Row="1" Grid.ColumnSpan="3"
                              Header="Nombre Expediente de Interno">
                            <AdornerDecorator>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="110"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"></RowDefinition>
                                <RowDefinition Height="auto"></RowDefinition>
                                <RowDefinition Height="auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <DataGrid Grid.Column="0"
                                      Grid.Row="0"
                                      Grid.RowSpan="3"
                                      Style="{StaticResource MetroDataGrid}"
                                      IsReadOnly="False"
                                      AutoGenerateColumns="False"
                                      ItemsSource="{Binding LstIngresos}"
                                      SelectedItem="{Binding SelectedIngreso}"
                                      SelectionMode="Single"
                                      CanUserAddRows="False" MaxHeight="250" MinHeight="250">
                                <i:Interaction.Triggers>
                                    <Views:RoutedEventTrigger RoutedEvent="ScrollViewer.ScrollChanged">
                                        <cmd:EventToCommand Command="{Binding CargarMasResultados}"
                                                            PassEventArgsToCommand="True" />
                                    </Views:RoutedEventTrigger>
                                </i:Interaction.Triggers>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="No. Ingreso"
                                                        Binding="{Binding Ingreso.ID_INGRESO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Año"
                                                        Binding="{Binding Ingreso.ID_ANIO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Folio"
                                                        Binding="{Binding Ingreso.ID_IMPUTADO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Interno"
                                                        Binding="{Binding Ingreso.IMPUTADO,Converter={StaticResource CoverterNombre}}"></DataGridTextColumn>
                                </DataGrid.Columns>
                                <DataGrid.RowStyle>
                                    <Style TargetType="DataGridRow"
                                           BasedOn="{StaticResource MetroDataGridRow}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Seleccionado,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                         Value="true">
                                                <Setter Property="Background"
                                                        Value="SkyBlue"></Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.RowStyle>
                            </DataGrid>
                            <Button Grid.Column="1"
                                    Grid.Row="0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Width="100"
                                    Margin="5"
                                    Style="{DynamicResource AccentedSquareButtonStyle}"
                                    CommandParameter="agregar_interno"
                                    Command="{Binding OnClick}">agregar -- ></Button>
                            <Button Grid.Column="1"
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Width="100"
                                    Margin="5"
                                    Style="{DynamicResource AccentedSquareButtonStyle}"
                                    CommandParameter="quitar_interno"
                                    Command="{Binding OnClick}">&lt; -- quitar</Button>

                            <DataGrid Grid.Column="2"
                                      Grid.Row="0"
                                      Grid.RowSpan="3"
                                      Style="{StaticResource MetroDataGrid}"
                                      IsReadOnly="False"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      SelectionMode="Single"
                                      ItemsSource="{Binding LstIngresosSeleccionados,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"
                                      SelectedItem="{Binding SelectedIngresoSeleccionado}"
                                      MaxHeight="250"
                                      MinHeight="250">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="No. Ingreso"
                                                        Binding="{Binding ID_INGRESO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Año"
                                                        Binding="{Binding ID_ANIO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Folio"
                                                        Binding="{Binding ID_IMPUTADO}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Interno"
                                                        Binding="{Binding IMPUTADO,Converter={StaticResource CoverterNombre}}"></DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                            </AdornerDecorator>
                        </GroupBox>

                </Grid>
                </AdornerDecorator>
            </TabItem>
        </Controls:MetroAnimatedSingleRowTabControl>
    </Grid>
</UserControl>
